syntax = "proto3";

package replica_replica;

service ReplicaReplicaGrpc {
    rpc PrePrepare (PrePrepareReq) returns (Empty) {}
    rpc Prepare (SignedMessage) returns (Empty) {}
    rpc Commit (SignedMessage) returns (Empty) {}
    rpc RelayRequest (SignedMessage) returns (Empty) {}
    rpc Checkpoint (SignedMessage) returns (Empty) {}
}

message PrePrepareReq {
    SignedMessage preprepare = 1;
    bytes message = 2;
}

message PrePrepare {
    int32 v = 1;
    int64 n = 2;
    bytes d = 3;
}

message Prepare {
    int32 v = 1;
    int64 n = 2;
    bytes d = 3;
    int32 i = 4;
}

message Commit {
    int32 v = 1;
    int64 n = 2;
    bytes d = 3;
    int32 i = 4;
}

message Checkpoint {
    int64 n = 1;
    bytes d = 2;
    int32 i = 3;
}

message SignedMessage {
    bytes message = 1;
    bytes signature = 2;
}

message Empty {
}